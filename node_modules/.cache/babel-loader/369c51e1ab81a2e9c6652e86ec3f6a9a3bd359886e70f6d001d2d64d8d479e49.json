{"ast":null,"code":"import React,{useState,useEffect}from\"react\";import Newslist from\"./newslist\";import{jsx as _jsx}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export default function Main(_ref){let{category}=_ref;const[news,setNews]=useState([]);const[loading,setLoading]=useState(false);const[page,setpage]=useState(1);const[totalpages,setTotalPages]=useState(1);// const [category, setcategory] = useState('general')\nfunction handleClickOnPrev(){setpage(e=>Math.max(e-1,1));}function handleClickOnNext(){setpage(e=>Math.min(e+1,totalpages));}useEffect(()=>{const url=\"https://newsapi.org/v2/top-headlines?country=in&category=\".concat(category,\"&apiKey=42d437807ba945d185b73f42f77bae87&pagesize=15&page=\").concat(page);// const url = \"https://newsapi.org/v2/everything?q=tesla&from=2023-10-22&sortBy=publishedAt&apiKey=42d437807ba945d185b73f42f77bae87\"\nsetLoading(true);fetch(url).then(response=>{if(!response.ok){throw new Error(\"HTTP error! Status: \".concat(response.status));}return response.json();}).then(data=>{setNews(data.articles);setTotalPages(Math.ceil(data.totalResults/12));console.log(data);}).catch(error=>{console.error(\"Fetch error:\",error);}).finally(()=>setLoading(false));},[page,totalpages,category]);// Empty dependency array to execute only once on component mount\nreturn/*#__PURE__*/_jsxs(\"div\",{className:\"container h-100 w-100\",style:{minHeight:\"100vh\",minWidth:\"85vw\",margin:\"0 auto\"},children:[/*#__PURE__*/_jsx(\"h1\",{className:\"text-center my-2\",children:\"News app\"}),!loading?/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsx(\"div\",{className:\"row d-flex\",style:{justifyContent:\"space-evenly\"},children:news.map(newsItem=>/*#__PURE__*/_jsx(Newslist,{imageURL:newsItem.urlToImage,title:newsItem.title,desc:newsItem.description,url:newsItem.url},newsItem.source.url))})}):/*#__PURE__*/_jsxs(\"div\",{style:{borderRadius:\"8px\",position:\"relative\",width:\"35vw\",zIndex:\"999\",height:\"8px\",backgroundColor:\"#ccc\",margin:\"30vh auto\"},children:[/*#__PURE__*/_jsx(\"h4\",{className:\"py-3 text-center\",children:\"loading...\"}),/*#__PURE__*/_jsx(\"span\",{style:{transition:\"5s ease-out\",position:\"absolute\",top:\"0\",left:\"10\",borderRadius:\"8px\",height:\"100%\",width:loading?'50%':'85%',backgroundColor:\"#333333\",animation:\"progress 15s ease-in forwards\"}})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"my-2\",style:{maxWidth:\"80vw\",display:\"flex\",justifyContent:\"space-between\",margin:\"0 auto\"},children:[/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-secondary\",disabled:page<=1,onClick:handleClickOnPrev,children:\"\\u2190 Previous\"}),/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-primary\",disabled:page>=totalpages-1,onClick:handleClickOnNext,children:\"Next \\u2192\"})]})]});}","map":{"version":3,"names":["React","useState","useEffect","Newslist","jsx","_jsx","Fragment","_Fragment","jsxs","_jsxs","Main","_ref","category","news","setNews","loading","setLoading","page","setpage","totalpages","setTotalPages","handleClickOnPrev","e","Math","max","handleClickOnNext","min","url","concat","fetch","then","response","ok","Error","status","json","data","articles","ceil","totalResults","console","log","catch","error","finally","className","style","minHeight","minWidth","margin","children","justifyContent","map","newsItem","imageURL","urlToImage","title","desc","description","source","borderRadius","position","width","zIndex","height","backgroundColor","transition","top","left","animation","maxWidth","display","disabled","onClick"],"sources":["C:/Users/LENOVO/OneDrive/news app/news-app/src/main/main.js"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\r\nimport Newslist from \"./newslist\";\r\n\r\nexport default function Main({category}) {\r\n  const [news, setNews] = useState([]);\r\n  const [loading, setLoading] = useState(false);\r\n  const [page, setpage] = useState(1);\r\n  const [totalpages, setTotalPages] = useState(1);\r\n  // const [category, setcategory] = useState('general')\r\n\r\n  function handleClickOnPrev() {\r\n    setpage((e) => Math.max(e - 1, 1));\r\n  }\r\n\r\n  function handleClickOnNext() {\r\n    setpage((e) => Math.min(e + 1, totalpages));\r\n  }\r\n\r\n  useEffect(() => {\r\n    const url = `https://newsapi.org/v2/top-headlines?country=in&category=${category}&apiKey=42d437807ba945d185b73f42f77bae87&pagesize=15&page=${page}`;\r\n    // const url = \"https://newsapi.org/v2/everything?q=tesla&from=2023-10-22&sortBy=publishedAt&apiKey=42d437807ba945d185b73f42f77bae87\"\r\n\r\n    setLoading(true);\r\n\r\n    fetch(url)\r\n      .then((response) => {\r\n        if (!response.ok) {\r\n          throw new Error(`HTTP error! Status: ${response.status}`);\r\n        }\r\n        return response.json();\r\n      })\r\n      .then((data) => {\r\n        setNews(data.articles);\r\n        setTotalPages(Math.ceil(data.totalResults / 12));\r\n        console.log(data);\r\n      })\r\n      .catch((error) => {\r\n        console.error(\"Fetch error:\", error);\r\n      })\r\n      .finally(() => setLoading(false));\r\n  }, [page, totalpages, category, ]); // Empty dependency array to execute only once on component mount\r\n\r\n  return (\r\n    <div className=\"container h-100 w-100\" style={{ minHeight: \"100vh\",minWidth:\"85vw\", margin: \"0 auto\" }}>\r\n      <h1 className=\"text-center my-2\">News app</h1>\r\n      {!loading ? (\r\n        <>\r\n          <div className=\"row d-flex\" style={{justifyContent: \"space-evenly\"}}>\r\n            {news.map((newsItem) => (\r\n              <Newslist\r\n                key={newsItem.source.url}\r\n                imageURL={newsItem.urlToImage}\r\n                title={newsItem.title}\r\n                desc={newsItem.description}\r\n                url={newsItem.url}\r\n              />\r\n            ))}\r\n          </div>\r\n        </>\r\n      ) : (\r\n        <div style={{borderRadius:\"8px\", position: \"relative\",width:\"35vw\",zIndex:\"999\", height: \"8px\", backgroundColor: \"#ccc\", margin: \"30vh auto\" }}>\r\n         <h4 className=\"py-3 text-center\">loading...</h4>\r\n         <span\r\n           style={{\r\n             transition: \"5s ease-out\",\r\n             position: \"absolute\",\r\n             top: \"0\",\r\n             left: \"10\",\r\n             borderRadius: \"8px\",\r\n             height: \"100%\",\r\n             width: loading ? '50%' : '85%',\r\n             backgroundColor: \"#333333\",\r\n             animation: \"progress 15s ease-in forwards\",\r\n           }}\r\n         ></span>\r\n       </div>\r\n      )}\r\n             <div className=\"my-2\" style={{ maxWidth: \"80vw\", display: \"flex\", justifyContent: \"space-between\", margin: \"0 auto\" }}>\r\n               <button className=\"btn btn-secondary\" disabled={page <= 1} onClick={handleClickOnPrev}>\r\n                 &larr; Previous\r\n               </button>\r\n               <button className=\"btn btn-primary\" disabled={page >= totalpages - 1} onClick={handleClickOnNext}>\r\n                 Next &rarr;\r\n               </button>\r\n             </div>\r\n    </div>\r\n  );\r\n}\r\n"],"mappings":"AAAA,MAAO,CAAAA,KAAK,EAAIC,QAAQ,CAAEC,SAAS,KAAQ,OAAO,CAClD,MAAO,CAAAC,QAAQ,KAAM,YAAY,CAAC,OAAAC,GAAA,IAAAC,IAAA,gCAAAC,QAAA,IAAAC,SAAA,gCAAAC,IAAA,IAAAC,KAAA,yBAElC,cAAe,SAAS,CAAAC,IAAIA,CAAAC,IAAA,CAAa,IAAZ,CAACC,QAAQ,CAAC,CAAAD,IAAA,CACrC,KAAM,CAACE,IAAI,CAAEC,OAAO,CAAC,CAAGb,QAAQ,CAAC,EAAE,CAAC,CACpC,KAAM,CAACc,OAAO,CAAEC,UAAU,CAAC,CAAGf,QAAQ,CAAC,KAAK,CAAC,CAC7C,KAAM,CAACgB,IAAI,CAAEC,OAAO,CAAC,CAAGjB,QAAQ,CAAC,CAAC,CAAC,CACnC,KAAM,CAACkB,UAAU,CAAEC,aAAa,CAAC,CAAGnB,QAAQ,CAAC,CAAC,CAAC,CAC/C;AAEA,QAAS,CAAAoB,iBAAiBA,CAAA,CAAG,CAC3BH,OAAO,CAAEI,CAAC,EAAKC,IAAI,CAACC,GAAG,CAACF,CAAC,CAAG,CAAC,CAAE,CAAC,CAAC,CAAC,CACpC,CAEA,QAAS,CAAAG,iBAAiBA,CAAA,CAAG,CAC3BP,OAAO,CAAEI,CAAC,EAAKC,IAAI,CAACG,GAAG,CAACJ,CAAC,CAAG,CAAC,CAAEH,UAAU,CAAC,CAAC,CAC7C,CAEAjB,SAAS,CAAC,IAAM,CACd,KAAM,CAAAyB,GAAG,6DAAAC,MAAA,CAA+DhB,QAAQ,+DAAAgB,MAAA,CAA6DX,IAAI,CAAE,CACnJ;AAEAD,UAAU,CAAC,IAAI,CAAC,CAEhBa,KAAK,CAACF,GAAG,CAAC,CACPG,IAAI,CAAEC,QAAQ,EAAK,CAClB,GAAI,CAACA,QAAQ,CAACC,EAAE,CAAE,CAChB,KAAM,IAAI,CAAAC,KAAK,wBAAAL,MAAA,CAAwBG,QAAQ,CAACG,MAAM,CAAE,CAAC,CAC3D,CACA,MAAO,CAAAH,QAAQ,CAACI,IAAI,CAAC,CAAC,CACxB,CAAC,CAAC,CACDL,IAAI,CAAEM,IAAI,EAAK,CACdtB,OAAO,CAACsB,IAAI,CAACC,QAAQ,CAAC,CACtBjB,aAAa,CAACG,IAAI,CAACe,IAAI,CAACF,IAAI,CAACG,YAAY,CAAG,EAAE,CAAC,CAAC,CAChDC,OAAO,CAACC,GAAG,CAACL,IAAI,CAAC,CACnB,CAAC,CAAC,CACDM,KAAK,CAAEC,KAAK,EAAK,CAChBH,OAAO,CAACG,KAAK,CAAC,cAAc,CAAEA,KAAK,CAAC,CACtC,CAAC,CAAC,CACDC,OAAO,CAAC,IAAM5B,UAAU,CAAC,KAAK,CAAC,CAAC,CACrC,CAAC,CAAE,CAACC,IAAI,CAAEE,UAAU,CAAEP,QAAQ,CAAG,CAAC,CAAE;AAEpC,mBACEH,KAAA,QAAKoC,SAAS,CAAC,uBAAuB,CAACC,KAAK,CAAE,CAAEC,SAAS,CAAE,OAAO,CAACC,QAAQ,CAAC,MAAM,CAAEC,MAAM,CAAE,QAAS,CAAE,CAAAC,QAAA,eACrG7C,IAAA,OAAIwC,SAAS,CAAC,kBAAkB,CAAAK,QAAA,CAAC,UAAQ,CAAI,CAAC,CAC7C,CAACnC,OAAO,cACPV,IAAA,CAAAE,SAAA,EAAA2C,QAAA,cACE7C,IAAA,QAAKwC,SAAS,CAAC,YAAY,CAACC,KAAK,CAAE,CAACK,cAAc,CAAE,cAAc,CAAE,CAAAD,QAAA,CACjErC,IAAI,CAACuC,GAAG,CAAEC,QAAQ,eACjBhD,IAAA,CAACF,QAAQ,EAEPmD,QAAQ,CAAED,QAAQ,CAACE,UAAW,CAC9BC,KAAK,CAAEH,QAAQ,CAACG,KAAM,CACtBC,IAAI,CAAEJ,QAAQ,CAACK,WAAY,CAC3B/B,GAAG,CAAE0B,QAAQ,CAAC1B,GAAI,EAJb0B,QAAQ,CAACM,MAAM,CAAChC,GAKtB,CACF,CAAC,CACC,CAAC,CACN,CAAC,cAEHlB,KAAA,QAAKqC,KAAK,CAAE,CAACc,YAAY,CAAC,KAAK,CAAEC,QAAQ,CAAE,UAAU,CAACC,KAAK,CAAC,MAAM,CAACC,MAAM,CAAC,KAAK,CAAEC,MAAM,CAAE,KAAK,CAAEC,eAAe,CAAE,MAAM,CAAEhB,MAAM,CAAE,WAAY,CAAE,CAAAC,QAAA,eAC9I7C,IAAA,OAAIwC,SAAS,CAAC,kBAAkB,CAAAK,QAAA,CAAC,YAAU,CAAI,CAAC,cAChD7C,IAAA,SACEyC,KAAK,CAAE,CACLoB,UAAU,CAAE,aAAa,CACzBL,QAAQ,CAAE,UAAU,CACpBM,GAAG,CAAE,GAAG,CACRC,IAAI,CAAE,IAAI,CACVR,YAAY,CAAE,KAAK,CACnBI,MAAM,CAAE,MAAM,CACdF,KAAK,CAAE/C,OAAO,CAAG,KAAK,CAAG,KAAK,CAC9BkD,eAAe,CAAE,SAAS,CAC1BI,SAAS,CAAE,+BACb,CAAE,CACG,CAAC,EACL,CACL,cACM5D,KAAA,QAAKoC,SAAS,CAAC,MAAM,CAACC,KAAK,CAAE,CAAEwB,QAAQ,CAAE,MAAM,CAAEC,OAAO,CAAE,MAAM,CAAEpB,cAAc,CAAE,eAAe,CAAEF,MAAM,CAAE,QAAS,CAAE,CAAAC,QAAA,eACpH7C,IAAA,WAAQwC,SAAS,CAAC,mBAAmB,CAAC2B,QAAQ,CAAEvD,IAAI,EAAI,CAAE,CAACwD,OAAO,CAAEpD,iBAAkB,CAAA6B,QAAA,CAAC,iBAEvF,CAAQ,CAAC,cACT7C,IAAA,WAAQwC,SAAS,CAAC,iBAAiB,CAAC2B,QAAQ,CAAEvD,IAAI,EAAIE,UAAU,CAAG,CAAE,CAACsD,OAAO,CAAEhD,iBAAkB,CAAAyB,QAAA,CAAC,aAElG,CAAQ,CAAC,EACN,CAAC,EACV,CAAC,CAEV"},"metadata":{},"sourceType":"module","externalDependencies":[]}